<DIV class="form-wizard card">
    <form class="form" action="/editEvent?id={{event._id}}" method="post">
        <div class="form-page-container">
            <div class="form-page" id="detailsPage">
                <h1 class="secondary-header">Event details</h1>
                <div id="status-dropdown" class="dropdown">
                    <p>Status: </p>
                    <p id="event-status" id="status">{{event.status}}</p>
                    <i class="lni lni-chevron-down dropdown-chevron"></i>
                    <div class="dropdown-content">
                        <a class="dropdown-item" data-status="planning">
                            Planning
                        </a>
                        <a class="dropdown-item" data-status="in progress">
                            In Progress
                        </a>
                        <a class="dropdown-item" data-status="cancelled">
                            Cancelled
                        </a>
                        <a class="dropdown-item" data-status="postponed">
                            Postponed
                        </a>
                        <a class="dropdown-item" data-status="cancelled">
                            Completed
                        </a>
                    </div>
                </div>
                <div class="form-row">
                    <div class="text-field-container">
                        <label class="field-label" for="event-name">Event name</label>
                        <input type="text" id="event-name" class="text-field" name="event-name" value="{{event.eventName}}" required>
                    </div>
                    <div class="text-field-container">
                        <label class="field-label" for="client-name">Client name</label>
                        <input type="text" id="client-name" class="text-field" name="client-name" value="{{event.clientFirstName}}  {{event.clientLastName}}" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="text-field-container">
                        <label class="field-label" for="event-description">Description</label>
                        <textarea id="event-description" class="text-field" name="event-description" rows="6" required>{{event.description}}</textarea>
                    </div>
                </div>
                <div class="form-row">
                    <div class="text-field-container">
                        <label class="field-label" for="location">Location</label>
                        <input type="text" id="location" class="text-field" name="location" value="{{event.location}}" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="text-field-container">
                        <label class="field-label" for="start-date">Start date</label>
                        <input type="date" id="start-date" class="text-field" name="start-date" required>
                    </div>
                    <div class="text-field-container">
                        <label class="field-label" for="end-date">End date</label>
                        <input type="date" id="end-date" class="text-field" name="end-date" required>
                    </div>
                </div>
                <h1 class="secondary-header">Contact person</h1>
                <div class="form-row">
                    <div class="text-field-container">
                        <label class="field-label" for="contact-name">Name</label>
                        <input type="text" id="contact-name" class="text-field" name="contact-name" value="{{event.CPFirstName}} {{event.CPLastName}}" required>
                    </div>
                    <div class="text-field-container">
                        <label class="field-label" for="phone-number">Phone number</label>
                        <input type="text" id="phone-number" class="text-field" name="phone-number" value="{{event.CPContactNo}}" required>
                    </div>
                </div>
            </div>
            <div class="form-page" id="team-members-page">
                <h1 class="secondary-header">Assign team members</h1>
                <div class="grid-container">
                    <h1 class="secondary-header">Search</h1>
                    <div role="search" class="search-bar" id="memberSearchForm">
                        <button type="submit" id="search-icon"><i class="lni lni-search-1"></i></button>
                        <input type="search" name="q" id="memberSearchInput" placeholder="Search team members...">
                    </div>
                    <div class="team-mini-grid" id="memberSearchResults">
                        {{#each members}}
                            {{>teamMemberMini this}}
                        {{else}}
                            <p>No other members currently</p>
                        {{/each}}
                    </div>
                </div>
                <div class="grid-container">
                    <h1 class="secondary-header">Added team members</h1>
                    <div class="team-mini-grid" id="addedMembers">
                        {{!-- {{#each currentTeamMembers}}
                            {{>teamMemberMini this}}
                        {{else}}
                            <p>No members added yet</p>
                        {{/each}} --}}
                    </div>
                </div>
            </div>
            <div class="form-page" id="suppliers-page">
                <h1 class="secondary-header">Add suppliers</h1>
                <div class="grid-container">
                    <h1 class="secondary-header">Search</h1>
                    <div role="search" class="search-bar" id="supplierSearchForm">
                        <button type="submit" id="search-icon"><i class="lni lni-search-1"></i></button>
                        <input type="search" name="q" id="memberSearchInput" placeholder="Search suppliers...">
                    </div>
                    <div class="team-mini-grid" id="supplierSearchResults">
                        {{#each suppliers}}
                            {{>supplierMini this}}
                        {{else}}
                            <p>No suppliers currently</p>
                        {{/each}}
                    </div>
                </div>
                <div class="grid-container">
                    <h1 class="secondary-header">Added suppliers</h1>
                    <div class="team-mini-grid" id="addedSuppliers">
                        {{!-- {{#each currentSuppliers}}
                            {{>supplierMini this}}
                        {{else}}
                            <p>No suppliers added</p>
                        {{/each}} --}}
                    </div>
                </div>
            </div>
        </div>
        <div class="form-controls">
            <button type="button" class="disabled-button bg-button button" id="form-back-button" disabled>
                <div class="button-wrapper">
                    <i class="lni lni-arrow-left"></i>
                    <p>Back</p>
                </div>
            </button>
            <button type="button" class="disabled-button fg-button button" id="form-next-button" disabled>
                <div class="button-wrapper">
                    <i class="lni lni-arrow-right"></i>
                    <p>Next</p>
                </div>
            </button>
            <button type="submit" class="fg-button button" id="form-submit-button">
                <div class="button-wrapper">
                    <i class="lni lni-pencil-1"></i>
                    <p>Edit event</p>
                </div>
            </button>
        </div>
        <input type="hidden" id="added-members-input" name="addedMembers">
        <input type="hidden" id="added-suppliers-input" name="addedSuppliers">
    </form>
</DIV>

<script>
const currentTeamMembers = [
    {{#each currentTeamMembers}} {
        _id: "{{this._id}}",
        firstName: "{{this.firstName}}",
        lastName: "{{this.lastName}}",
        role: "{{this.role}}",
        pfp: "{{this.pfp}}",
        email: "{{this.email}}",
        bio: "{{this.bio}}"
    }{{#unless @last}},{{/unless}}
    {{/each}}
];

const currentSuppliers = [
    {{#each currentSuppliers}} {
        _id: "{{this._id}}",
        name: "{{this.name}}",
        contactNames: "{{this.contactNames}}",
        contactNumbers: "{{this.contactNumbers}}"
    }{{#unless @last}},{{/unless}}
    {{/each}}
];

let addedMembers = [{{#each currentTeamMembers}}"{{this._id}}"{{#unless @last}},{{/unless}}{{/each}}];
let addedSuppliers = [{{#each currentSuppliers}}"{{this._id}}"{{#unless @last}},{{/unless}}{{/each}}];
</script>